import{S as v,j as u,A,s as H,a as j,t as I}from"./index-BvBSYTBq.js";import{r as i}from"./react-core-C6dLrvtP.js";import{C as l,R as P,p as E}from"./semi-ui-Bu2vRZ6A.js";import{m as f}from"./tools-BYm9mvJU.js";import"./react-components-xfTEsaUe.js";import"./semantic-NrADMDYN.js";const q=()=>{var F,h,m,d,p,g,x,C;const[e]=i.useContext(v),[B,D]=i.useState(!1),[o,a]=i.useState(""),_=async()=>{const n=await A.get("/api/notice"),{success:s,message:c,data:t}=n.data;if(s){let r=localStorage.getItem("notice");if(t!==r&&t!==""){const w=f(t);H(w,!0),localStorage.setItem("notice",t)}}else j(c)},y=async()=>{a(localStorage.getItem("home_page_content")||"");const n=await A.get("/api/home_page_content"),{success:s,message:c,data:t}=n.data;if(s){let r=t;t.startsWith("https://")||(r=f.parse(t)),a(r),localStorage.setItem("home_page_content",r)}else j(c),a("加载首页内容失败...");D(!0)},b=()=>{var s;const n=(s=e==null?void 0:e.status)==null?void 0:s.start_time;return e.status?I(n):""};return i.useEffect(()=>{_().then(),y().then()},[]),u.jsx(u.Fragment,{children:B&&o===""?u.jsx(u.Fragment,{children:u.jsx(l,{bordered:!1,headerLine:!1,title:"系统状况",bodyStyle:{padding:"10px 20px"},children:u.jsxs(P,{gutter:16,children:[u.jsx(E,{span:12,children:u.jsxs(l,{title:"系统信息",headerExtraContent:u.jsx("span",{style:{fontSize:"12px",color:"var(--semi-color-text-1)"},children:"系统信息总览"}),children:[u.jsxs("p",{children:["名称：",(F=e==null?void 0:e.status)==null?void 0:F.system_name]}),u.jsxs("p",{children:["版本：",(h=e==null?void 0:e.status)!=null&&h.version?(m=e==null?void 0:e.status)==null?void 0:m.version:"unknown"]}),u.jsxs("p",{children:["源码：",u.jsx("a",{href:"https://github.com/songquanpeng/one-api",target:"_blank",rel:"noreferrer",children:"https://github.com/songquanpeng/one-api"})]}),u.jsxs("p",{children:["启动时间：",b()]})]})}),u.jsx(E,{span:12,children:u.jsxs(l,{title:"系统配置",headerExtraContent:u.jsx("span",{style:{fontSize:"12px",color:"var(--semi-color-text-1)"},children:"系统配置总览"}),children:[u.jsxs("p",{children:["邮箱验证：",((d=e==null?void 0:e.status)==null?void 0:d.email_verification)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["GitHub 身份验证：",((p=e==null?void 0:e.status)==null?void 0:p.github_oauth)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["微信身份验证：",((g=e==null?void 0:e.status)==null?void 0:g.wechat_login)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["Turnstile 用户校验：",((x=e==null?void 0:e.status)==null?void 0:x.turnstile_check)===!0?"已启用":"未启用"]}),u.jsxs("p",{children:["Telegram 身份验证：",((C=e==null?void 0:e.status)==null?void 0:C.telegram_oauth)===!0?"已启用":"未启用"]})]})})]})})}):u.jsx(u.Fragment,{children:o.startsWith("https://")?u.jsx("iframe",{src:o,style:{width:"100%",height:"100vh",border:"none"}}):u.jsx("div",{style:{fontSize:"larger"},dangerouslySetInnerHTML:{__html:o}})})})};export{q as default};
